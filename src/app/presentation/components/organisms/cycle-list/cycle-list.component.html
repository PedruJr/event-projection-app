<div class="cycle-wrapper">
  <div class="cycle-header">
    <span class="title">Selecione ciclos</span>
    <span class="optional">(opcional)</span>
  </div>
  <p class="description">
    Por padrão as entidades são selecionadas automaticamente de acordo com os ciclos que você participa e suas prioridades
  </p>

  <div *ngIf="activeCycles().length > 0">
    <table>
      <thead>
      <tr>
        <th>Ciclos</th>
        <th>Selecionados/Disponíveis</th>
        <th>Eventos para hoje</th>
      </tr>
      </thead>
    </table>

    <div class="table-wrapper">
      <div class="section-subtitle">
        Ciclos com entidades disponíveis ({{ activeCycles().length }})
      </div>
      <table>
        <tbody>
        <tr *ngFor="let cycle of activeCycles(); trackBy: trackByName">
          <td>
            <input
              type="checkbox"
              class="checkbox"
              [checked]="cycle.selected"
              (change)="toggle(cycle.name)"
            />
            <mat-icon [ngClass]="cycle.priority.toLowerCase()">
              {{ getPriorityIcon(cycle.priority) }}
            </mat-icon>
            {{ cycle.name }}
          </td>
          <td>
            <span>{{ cycle.selectedEntities }}</span>
            <span>{{ cycle.availableEntities }}</span>
          </td>
          <td>{{ cycle.todayEvents }}</td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div *ngIf="disabledCycles().length > 0">
    <div class="table-wrapper">
      <div class="section-subtitle">Ciclos sem entidades disponíveis</div>
      <table>
        <tbody>
        <tr *ngFor="let cycle of disabledCycles(); trackBy: trackByName">
          <td>
            <mat-icon class="disabled">block</mat-icon>
            {{ cycle.name }}
          </td>
          <td>0/{{ cycle.availableEntities }}</td>
          <td>0</td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
